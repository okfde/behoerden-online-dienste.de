{% extends "layout.html" %}

{% block content %}
<div class="jumbotron">
  <div class="container">
    <h1>Auswertung: Verschlüsselung</h1>
  </div>
</div>
<div class="container">
  <div class="row-fluid">
    <div class="col-md-2 col-xs-12">
      <canvas id="encryption_yes_no_web_canvas" class="chart-square"></canvas>
    </div>
    <div class="col-md-10 col-xs-12">
      <h2>Website-Absicherung in
        <select class="form-control" style="display: inline-block; width: auto;" id="encryption_yes_no_web_select">
          <option value="0" selected="selected">ganz Deutschland</option>
          <option value="9">Bayern</option>
          <option value="8">Baden-Württemberg</option>
          <option value="11">Berlin</option>
          <option value="12">Brandenburg</option>
          <option value="4">Bremen</option>
          <option value="2">Hamburg</option>
          <option value="6">Hessen</option>
          <option value="13">Mecklenburg-Vorpommern</option>
          <option value="3">Niedersachsen</option>
          <option value="5">Nordrhein-Westfalen</option>
          <option value="7">Rheinland-Pfalz</option>
          <option value="10">dem Saarland</option>
          <option value="14">Sachsen</option>
          <option value="15">Sachsen-Anhalt</option>
          <option value="1">Schleswig-Holstein</option>
          <option value="16">Thüringen</option>
        </select>
      </h2>
      <p>Die meisten Webseiten bieten gar keine Absicherung der Kommunikation an.</p>
    </div>
  </div>
  <div class="row-fluid">
    <div class="col-md-2 col-xs-12">
      <canvas id="encryption_quality_web_canvas" class="chart-square"></canvas>
    </div>
    <div class="col-md-10 col-xs-12">
      <h2>Qualität der Website-Absicherung in
        <select class="form-control" style="display: inline-block; width: auto;" id="encryption_quality_web_select">
          <option value="0" selected="selected">ganz Deutschland</option>
          <option value="9">Bayern</option>
          <option value="8">Baden-Württemberg</option>
          <option value="11">Berlin</option>
          <option value="12">Brandenburg</option>
          <option value="4">Bremen</option>
          <option value="2">Hamburg</option>
          <option value="6">Hessen</option>
          <option value="13">Mecklenburg-Vorpommern</option>
          <option value="3">Niedersachsen</option>
          <option value="5">Nordrhein-Westfalen</option>
          <option value="7">Rheinland-Pfalz</option>
          <option value="10">dem Saarland</option>
          <option value="14">Sachsen</option>
          <option value="15">Sachsen-Anhalt</option>
          <option value="1">Schleswig-Holstein</option>
          <option value="16">Thüringen</option>
        </select>
      </h2>
      <p>Die Qualität ist sehr durchwachsen.</p>
    </div>
  </div>
  <div class="row-fluid">
    <div class="col-md-2 col-xs-12">
      <canvas id="encryption_yes_no_mail_canvas" class="chart-square"></canvas>
    </div>
    <div class="col-md-10 col-xs-12">
      <h2>Mail-Absicherung in
        <select class="form-control" style="display: inline-block; width: auto;" id="encryption_yes_no_mail_select">
          <option value="0" selected="selected">ganz Deutschland</option>
          <option value="9">Bayern</option>
          <option value="8">Baden-Württemberg</option>
          <option value="11">Berlin</option>
          <option value="12">Brandenburg</option>
          <option value="4">Bremen</option>
          <option value="2">Hamburg</option>
          <option value="6">Hessen</option>
          <option value="13">Mecklenburg-Vorpommern</option>
          <option value="3">Niedersachsen</option>
          <option value="5">Nordrhein-Westfalen</option>
          <option value="7">Rheinland-Pfalz</option>
          <option value="10">dem Saarland</option>
          <option value="14">Sachsen</option>
          <option value="15">Sachsen-Anhalt</option>
          <option value="1">Schleswig-Holstein</option>
          <option value="16">Thüringen</option>
        </select>
      </h2>
      <p>Der überwiegende Teil der Mailserver bieten keine Absicherung der Kommunikation an.</p>
    </div>
  </div>
  <div class="row-fluid">
    <div class="col-md-2 col-xs-12">
      <canvas id="encryption_quality_mail_canvas" class="chart-square"></canvas>
    </div>
    <div class="col-md-10 col-xs-12">
      <h2>Qualität der E-Mail-Absicherung in
        <select class="form-control" style="display: inline-block; width: auto;" id="encryption_quality_mail_select">
          <option value="0" selected="selected">ganz Deutschland</option>
          <option value="9">Bayern</option>
          <option value="8">Baden-Württemberg</option>
          <option value="11">Berlin</option>
          <option value="12">Brandenburg</option>
          <option value="4">Bremen</option>
          <option value="2">Hamburg</option>
          <option value="6">Hessen</option>
          <option value="13">Mecklenburg-Vorpommern</option>
          <option value="3">Niedersachsen</option>
          <option value="5">Nordrhein-Westfalen</option>
          <option value="7">Rheinland-Pfalz</option>
          <option value="10">dem Saarland</option>
          <option value="14">Sachsen</option>
          <option value="15">Sachsen-Anhalt</option>
          <option value="1">Schleswig-Holstein</option>
          <option value="16">Thüringen</option>
        </select>
      </h2>
      <p>Die Qualität ist durchwachsen.</p>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
{{super()}}
<script>
  
  encryption_yes_no_layout = {
    'labels': [
      'Unverschlüsselt',
      'Verschlüsselt'
    ],
    'datasets': [
      {
        'data': [],
        'backgroundColor': [
          '#d9534f',
          '#5cb85c'
        ]
      }
    ]
  }
  var encryption_quality_layout = {
    'labels': [
      'sehr unsicher',
      'unsicher',
      'verbesserungswürdig',
      'gut',
      'ausgezeichnet'
    ],
    'datasets': [
      {
        'data': [],
        'backgroundColor': [
          '#d9534f',
          '#d9534f',
          '#f0ad4e',
          '#5cb85c',
          '#5cb85c'
        ]
      }
    ]
  }
  // data
  var encryption_yes_no_web = [ {{ visualisations['encryption_yes_no_web']['data']|safe }}, {% for i in range(1, 17) %}{{ visualisations['encryption_yes_no_web_%s' % i]['data']|safe }}{% if not loop.last %}, {% endif %}{% endfor %} ]
  var encryption_yes_no_mail = [ {{ visualisations['encryption_yes_no_mail']['data']|safe }}, {% for i in range(1, 17) %}{{ visualisations['encryption_yes_no_mail_%s' % i]['data']|safe }}{% if not loop.last %}, {% endif %}{% endfor %} ]
  var encryption_quality_web = [ {{ visualisations['encryption_quality_web']['data']|safe }}, {% for i in range(1, 17) %}{{ visualisations['encryption_quality_web_%s' % i]['data']|safe }}{% if not loop.last %}, {% endif %}{% endfor %} ]
  var encryption_quality_mail = [ {{ visualisations['encryption_quality_mail']['data']|safe }}, {% for i in range(1, 17) %}{{ visualisations['encryption_yes_no_mail_%s' % i]['data']|safe }}{% if not loop.last %}, {% endif %}{% endfor %} ]
  
  $(document).ready(function() {
    // yes no web
    var encryption_yes_no_web_data = JSON.parse(JSON.stringify(encryption_yes_no_layout));
    encryption_yes_no_web_data['datasets'][0]['data'] = encryption_yes_no_web[$('#encryption_yes_no_web_select').val()];
    var encryption_yes_no_web_current = new Chart(document.getElementById("encryption_yes_no_web_canvas").getContext("2d"), { type: 'doughnut', data: encryption_yes_no_web_data });
    $('#encryption_yes_no_web_select').change(function() {
      encryption_yes_no_web_current.data.datasets[0].data = encryption_yes_no_web[$('#encryption_yes_no_web_select').val()];
      encryption_yes_no_web_current.update();
    });
    
    // yes no mail
    var encryption_yes_no_mail_data = JSON.parse(JSON.stringify(encryption_yes_no_layout));
    encryption_yes_no_mail_data['datasets'][0]['data'] = encryption_yes_no_mail[$('#encryption_yes_no_mail_select').val()];
    var encryption_yes_no_mail_current = new Chart(document.getElementById("encryption_yes_no_mail_canvas").getContext("2d"), { type: 'doughnut', data: encryption_yes_no_mail_data });
    $('#encryption_yes_no_mail_select').change(function() {
      encryption_yes_no_mail_current.data.datasets[0].data = encryption_yes_no_mail[$('#encryption_yes_no_mail_select').val()];
      encryption_yes_no_mail_current.update();
    });
    
    // quality web
    var encryption_quality_web_data = JSON.parse(JSON.stringify(encryption_quality_layout));
    encryption_quality_web_data['datasets'][0]['data'] = encryption_quality_web[$('#encryption_quality_web_select').val()];
    var encryption_quality_web_current = new Chart(document.getElementById("encryption_quality_web_canvas").getContext("2d"), { type: 'doughnut', data: encryption_quality_web_data });
    $('#encryption_quality_web_select').change(function() {
      encryption_quality_web_current.data.datasets[0].data = encryption_quality_web[$('#encryption_quality_web_select').val()];
      encryption_quality_web_current.update();
    });
    
    // quality mail
    var encryption_quality_mail_data = JSON.parse(JSON.stringify(encryption_quality_layout));
    encryption_quality_mail_data['datasets'][0]['data'] = encryption_quality_mail[$('#encryption_quality_mail_select').val()];
    var encryption_quality_mail_current = new Chart(document.getElementById("encryption_quality_mail_canvas").getContext("2d"), { type: 'doughnut', data: encryption_quality_mail_data });
    $('#encryption_quality_mail_select').change(function() {
      encryption_quality_mail_current.data.datasets[0].data = encryption_quality_mail[$('#encryption_quality_mail_select').val()];
      encryption_quality_mail_current.update();
    });
  });
</script>
{% endblock %}